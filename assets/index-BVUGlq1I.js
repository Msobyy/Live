import{R as S,j as e,a0 as V,r,X as k,a1 as G,a2 as R,a3 as U,a4 as W,B as h,T as N,Q as M,a5 as B,$ as n,u as I,E,Y as F,Z as L,V as _,W as T}from"./index-CNTiDywt.js";import{d as $,a as H}from"./NewReleases-B5mYe_xI.js";import{d as O,a as Q}from"./Cancel-C1QOmCOy.js";import{D as X,G as Y,d as Z}from"./DeleteOutlineOutlined-CbmNUC5d.js";import{d as q}from"./Edit-BIOAprcU.js";import{b as w,F as P,C as A}from"./TextField-6BbDyb-7.js";import"./Skeleton-CTGOtL5A.js";import"./FormHelperText-CUhixBiN.js";const z={name:"",email:"",driverType:"",isAvailable:!1,isProfileCompleted:!1,isProfileVerified:!1},J=S.forwardRef(function(d,t){return e.jsx(V,{direction:"up",ref:t,...d})});function K({message:f,open:d,handleClose:t,driver:a,handleUpdateAgree:j}){const[o,c]=r.useState(z),[u,b]=r.useState(!1);r.useEffect(()=>{a&&g()},[]);const g=()=>{c({name:a==null?void 0:a.name,email:a==null?void 0:a.email,driverType:a==null?void 0:a.driverType,isAvailable:a==null?void 0:a.isAvailable,isProfileCompleted:a==null?void 0:a.isProfileCompleted,isProfileVerified:a==null?void 0:a.isProfileVerified})},s=m=>{const{name:p,value:i,type:x,checked:l}=m.target,C=x==="checkbox"?l:i;c(y=>({...y,[p]:C}))},D=async()=>{b(!0);const{id:m,...p}=a,i={userId:m,...p};o.name&&(i.name=o.name),o.email&&(i.email=o.email),o.driverType&&(i.driverType=o.driverType),o.isAvailable!==null&&(i.isAvailable=o.isAvailable),o.isProfileCompleted!==null&&(i.isProfileCompleted=o.isProfileCompleted),o.isProfileVerified!==null&&(i.isProfileVerified=o.isProfileVerified);try{await B("drivers",i.userId,i)?j():n.error("Error Updating Driver")}catch{n.error("Something Went Wrong ")}finally{b(!1),t()}};return e.jsxs(e.Fragment,{children:[u&&e.jsx(k,{}),e.jsxs(G,{open:d,TransitionComponent:J,keepMounted:!0,onClose:t,children:[e.jsx(R,{children:e.jsx(U,{id:"alert-dialog-slide-description",children:f})}),e.jsx(W,{children:e.jsxs(h,{sx:{p:3,bgcolor:"background.paper",borderRadius:2},children:[e.jsx(N,{variant:"h5",sx:{mb:3,textAlign:"center",fontWeight:"bold",color:"primary.main"},children:"Update User Profile"}),e.jsx(w,{fullWidth:!0,label:"Name",name:"name",value:o.name,onChange:s,sx:{mb:3}}),e.jsx(w,{fullWidth:!0,label:"Email",name:"email",value:o.email,onChange:s,sx:{mb:3}}),e.jsx(w,{fullWidth:!0,label:"Role",name:"driverType",value:o.driverType,onChange:s,sx:{mb:3}}),e.jsxs(h,{sx:{display:"flex",flexDirection:"row",gap:2,mb:3},children:[e.jsx(P,{control:e.jsx(A,{name:"isAvailable",checked:o.isAvailable,onChange:s}),label:"Availability"}),e.jsx(P,{control:e.jsx(A,{name:"isProfileCompleted",checked:o.isProfileCompleted,onChange:s}),label:"Profile Status"}),e.jsx(P,{control:e.jsx(A,{name:"isProfileVerified",checked:o.isProfileVerified,onChange:s}),label:"Profile Verified"})]}),e.jsxs(h,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(M,{variant:"outlined",color:"secondary",onClick:t,sx:{minWidth:100},children:"Cancel"}),e.jsx(M,{variant:"contained",color:"indigo",onClick:D,sx:{minWidth:100},children:"Update"})]})]})})]})]})}const ne=()=>{const f=I(),{drivers:d}=r.useContext(E),[t,a]=r.useState(null),[j,o]=r.useState(!1),[c,u]=r.useState({val:!1,data:null}),[b,g]=r.useState(!1),s=l=>{a(l),o(!0)},D=async()=>{if(t!==null){g(!0);try{await L("drivers",t)?(o(!1),a(null),n.success("Data deleted Successfully")):n.error("Error Deleting Driver")}catch{n.error("Data cannot be deleted")}finally{g(!1)}}},m=async()=>{try{n.success("Data Updated Successfully")}catch{n.error("Data cannot be Updated")}},p=()=>{o(!1),u(!1),a(null)},i=l=>{var y;const C=d.filter(v=>v.id==l);(y=C[0])!=null&&y.id&&u({val:!0,data:C[0]})},x=[{field:"profilePic",headerName:"Avatar",width:60,sortable:!1,filterable:!1,renderCell:l=>e.jsx(_,{src:l.row.profilePic})},{field:"name",headerName:"Name",width:200,cellClassName:"name-column-cell"},{field:"driverType",headerName:"Role",width:200},{field:"isAvailable",headerName:"Availibility",width:180,renderCell:l=>l.row.isAvailable?e.jsx($,{sx:{color:"success.main"}}):e.jsx(H,{sx:{color:"error.main"}})},{field:"isProfileCompleted",headerName:"Profile Status",width:180,renderCell:l=>l.row.isProfileCompleted===!0?"Completed":"InComplete"},{field:"isProfileVerified",headerName:"Profile Verified",width:150,renderCell:l=>l.row.isProfileVerified?e.jsx(O,{sx:{color:"success.main"}}):e.jsx(Q,{sx:{color:"error.main"}})},{field:"edit",headerName:"Actions",renderCell:l=>e.jsxs(h,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:[e.jsx(T,{onClick:()=>{i(l.row.id)},children:e.jsx(q,{})}),e.jsx(T,{onClick:()=>{s(l.row.id)},children:e.jsx(Z,{sx:{color:"error.main"}})})]})}];return e.jsxs(e.Fragment,{children:[b&&e.jsx(k,{}),e.jsxs(h,{sx:{height:"75vh",width:"100%",backgroundColor:f.palette.grey[0],borderRadius:2,border:"1px solid",borderColor:f.palette.grey.A800},children:[e.jsx(X,{columns:x,rows:d,getRowSpacing:l=>({top:l.isFirstVisible?0:5,bottom:l.isLastVisible?0:5}),getRowId:l=>l.id,slots:{toolbar:Y},sx:{"& .MuiDataGrid-root":{border:"none"},"& .MuiDataGrid-cell.MuiDataGrid-cell--textLeft":{border:"none"},"& .name-column-cell":{color:"primary.main"},"& .css-yrdy0g-MuiDataGrid-columnHeaderRow":{background:"#69c0ff !important",fontWeight:"bold",borderBottom:"none",marginBottom:1},"& .MuiDataGrid-virtualScroller.css-1793420-MuiDataGrid-virtualScroller":{},"& .MuiDataGrid-footerContainer.MuiDataGrid-withBorderColor.css-wop1k0-MuiDataGrid-footerContainer":{borderTop:"none",backgroundColor:"#69c0ff",marginTop:1},"& .MuiDataGrid-row":{backgroundColor:"secondary.lighter"},"& .MuiDataGrid-row:hover":{backgroundColor:"secondary.light"},"& .MuiDataGrid-columnHeaderTitle.css-t89xny-MuiDataGrid-columnHeaderTitle":{fontWeight:"bolder"},"& .MuiDataGrid-toolbarContainer .MuiButton-text":{color:"purple !important"}}}),e.jsx(F,{message:"Are you sure you want to Delete?",open:j,handleClose:()=>o(!1),handleAgree:D,handleDisagree:p}),c.val&&e.jsx(K,{message:"Are you sure you want to Update?",open:c.val,handleClose:()=>{u({val:!1,data:null})},driver:c.data,handleUpdateAgree:m})]})]})};export{ne as default};

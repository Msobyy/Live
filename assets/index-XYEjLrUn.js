import{y as C,z as N,j as e,R as X,a0 as Z,r as u,X as V,a1 as J,a2 as K,a3 as ee,a4 as ae,B as c,T as le,Q as A,a6 as te,$ as r,a7 as ie,a5 as re,u as oe,E as se,a8 as ne,Y as de,Z as ue,V as fe,W as G}from"./index-DimCOfJk.js";import{d as he,a as ce}from"./NewReleases-DI-WOdQl.js";import{a as E,d as me}from"./Cancel-g3gT0F9r.js";import{D as xe,G as ge,d as ve}from"./DeleteOutlineOutlined-BEKHsY0E.js";import{d as F}from"./Edit-X572SKbF.js";import{S as be}from"./index-BanYUD1y.js";import{b as d,F as p,C as y}from"./TextField-88RA9pMz.js";import"./Skeleton-Dok89xC-.js";import"./FormHelperText-Cxw42B0z.js";var R={},we=N;Object.defineProperty(R,"__esModule",{value:!0});var T=R.default=void 0,je=we(C()),pe=e;T=R.default=(0,je.default)((0,pe.jsx)("path",{d:"M15.67 4H14V2h-4v2H8.33C7.6 4 7 4.6 7 5.33v15.33C7 21.4 7.6 22 8.33 22h7.33c.74 0 1.34-.6 1.34-1.33V5.33C17 4.6 16.4 4 15.67 4M11 20v-5.5H9L13 7v5.5h2z"}),"BatteryChargingFull");var $={},ye=N;Object.defineProperty($,"__esModule",{value:!0});var P=$.default=void 0,Ce=ye(C()),Ne=e;P=$.default=(0,Ce.default)((0,Ne.jsx)("path",{d:"M17.71 7.71 12 2h-1v7.59L6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 11 14.41V22h1l5.71-5.71-4.3-4.29zM13 5.83l1.88 1.88L13 9.59zm1.88 10.46L13 18.17v-3.76z"}),"Bluetooth");var k={},De=N;Object.defineProperty(k,"__esModule",{value:!0});var U=k.default=void 0,Se=De(C()),Me=e;U=k.default=(0,Se.default)((0,Me.jsx)("path",{d:"m13 5.83 1.88 1.88-1.6 1.6 1.41 1.41 3.02-3.02L12 2h-1v5.03l2 2zM5.41 4 4 5.41 10.59 12 5 17.59 6.41 19 11 14.41V22h1l4.29-4.29 2.3 2.29L20 18.59zM13 18.17v-3.76l1.88 1.88z"}),"BluetoothDisabled");var B={},_e=N;Object.defineProperty(B,"__esModule",{value:!0});var q=B.default=void 0,Ie=_e(C()),Le=e;q=B.default=(0,Ie.default)((0,Le.jsx)("path",{d:"m1 9 2 2c4.97-4.97 13.03-4.97 18 0l2-2C16.93 2.93 7.08 2.93 1 9m8 8 3 3 3-3c-1.65-1.66-4.34-1.66-6 0m-4-4 2 2c2.76-2.76 7.24-2.76 10 0l2-2C15.14 9.14 8.87 9.14 5 13"}),"Wifi");var O={},ze=N;Object.defineProperty(O,"__esModule",{value:!0});var H=O.default=void 0,Ae=ze(C()),Re=e;H=O.default=(0,Ae.default)((0,Re.jsx)("path",{d:"M22.99 9C19.15 5.16 13.8 3.76 8.84 4.78l2.52 2.52c3.47-.17 6.99 1.05 9.63 3.7zm-4 4c-1.29-1.29-2.84-2.13-4.49-2.56l3.53 3.53zM2 3.05 5.07 6.1C3.6 6.82 2.22 7.78 1 9l1.99 2c1.24-1.24 2.67-2.16 4.2-2.77l2.24 2.24C7.81 10.89 6.27 11.73 5 13v.01L6.99 15c1.36-1.36 3.14-2.04 4.92-2.06L18.98 20l1.27-1.26L3.29 1.79zM9 17l3 3 3-3c-1.65-1.66-4.34-1.66-6 0"}),"WifiOff");const $e={brand:"",model:"",year:"",category:"",seats:"",price:"",fuel:"",bluetooth:!1,charger:!1,vehicleNo:"",isAvailable:!1,engineSize:"",water:!1,wifi:!1,imagesList:[]},ke={brand:"",model:"",year:"",category:"",seats:"",price:"",fuel:"",bluetooth:!1,charger:!1,vehicleNo:"",isAvailable:!1,engineSize:"",carId:"",water:!1,wifi:!1,imagesList:[],carOwner:{email:"",id:"",phoneNo:"",name:""}},Be=X.forwardRef(function(b,m){return e.jsx(Z,{direction:"up",ref:m,...b})});function Oe({message:v,open:b,handleClose:m,car:a,handleUpdateAgree:w,isNew:n}){const[l,f]=u.useState(()=>n?ke:$e),[o,h]=u.useState([]),[D,j]=u.useState(!1);u.useEffect(()=>{a&&S()},[a]);const S=()=>{n?f(t=>({...t,carOwner:{email:a==null?void 0:a.email,id:a==null?void 0:a.userId,name:a==null?void 0:a.name,phoneNo:a==null?void 0:a.phoneNo}})):(f({brand:a==null?void 0:a.brand,model:a==null?void 0:a.model,year:a==null?void 0:a.year,category:a==null?void 0:a.category,seats:a==null?void 0:a.seats,price:a==null?void 0:a.price,fuel:a==null?void 0:a.fuel,bluetooth:a==null?void 0:a.bluetooth,charger:a==null?void 0:a.charger,vehicleNo:a==null?void 0:a.vehicleNo,isAvailable:a==null?void 0:a.isAvailable,engineSize:a==null?void 0:a.engineSize,water:a==null?void 0:a.water,wifi:a==null?void 0:a.wifi,imagesList:a==null?void 0:a.imagesList}),h(a==null?void 0:a.imagesList))},i=t=>{const{name:s,value:x,type:g,checked:W}=t.target,Y=g==="checkbox"?W:x;f(Q=>({...Q,[s]:Y}))},M=t=>(delete t.id,l.brand&&(t.brand=l.brand),l.model&&(t.model=l.model),l.year&&(t.year=l.year),l.category&&(t.category=l.category),l.seats&&(t.seats=l.seats),l.price&&(t.price=l.price),l.fuel&&(t.fuel=l.fuel),l.bluetooth!==null&&(t.bluetooth=l.bluetooth),l.charger!==null&&(t.charger=l.charger),l.wifi!==null&&(t.wifi=l.wifi),l.vehicleNo&&(t.vehicleNo=l.vehicleNo),l.isAvailable!==null&&(t.isAvailable=l.isAvailable),l.water!==null&&(t.water=l.water),l.engineSize&&(t.engineSize=l.engineSize),l.imagesList=o,t.imagesList=o,t),_=()=>{const t=s=>typeof s=="string"&&/^[0-9]+(\.[0-9]+)?$/.test(s);return!l.brand||!l.model||!l.year||!l.category||!l.seats||!l.price||!l.fuel||l.isAvailable==null||l.bluetooth==null||l.charger==null||l.water==null||l.wifi==null||!l.engineSize||!l.vehicleNo?(r.error("Fields cannot be empty"),!1):!t(l.price)||!t(l.engineSize)||!t(l.seats)?(r.error("Invalid Number format"),!1):!l.imagesList.length>0?(r.error("Error: No Image"),!1):!0},I=async()=>{if(j(!0),o.length>0&&(l.imagesList=o),!!_())try{n?(l.carId=te(),await L()):await z()}catch{r.error(n?"Something went wrong adding the car!":"Error updating car!")}finally{j(!1)}},L=async()=>{await ie("carRental",l.carId,l)?w():r.error("Data insertion failed")},z=async()=>{const{id:t,...s}=a,x={carId:t,...s},g=M(x);await re("carRental",g.carId,g)?w():r.error("Error Updating Car")};return e.jsxs(e.Fragment,{children:[D&&e.jsx(V,{}),e.jsxs(J,{open:b,TransitionComponent:Be,keepMounted:!0,onClose:m,children:[e.jsx(K,{children:e.jsx(ee,{id:"alert-dialog-slide-description",children:v})}),e.jsx(ae,{children:e.jsxs(c,{sx:{p:2},children:[e.jsx(le,{variant:"h6",sx:{mb:2},children:"Update Car Information"}),e.jsx(be,{car:a,updateImage:o,setupdateImage:h,collection:"carPics"}),e.jsxs(c,{sx:{display:"flex",gap:2},children:[e.jsx(d,{fullWidth:!0,label:"Brand",name:"brand",value:l.brand,onChange:i,sx:{mb:2}}),e.jsx(d,{fullWidth:!0,label:"Model",name:"model",value:l.model,onChange:i,sx:{mb:2}})]}),e.jsxs(c,{sx:{display:"flex",gap:2},children:[e.jsx(d,{fullWidth:!0,label:"Year",name:"year",value:l.year,onChange:i,sx:{mb:2}}),e.jsx(d,{fullWidth:!0,label:"Category",name:"category",value:l.category,onChange:i,sx:{mb:2}})]}),e.jsxs(c,{sx:{display:"flex",gap:2},children:[e.jsx(d,{fullWidth:!0,label:"Seats",name:"seats",value:l.seats,onChange:i,sx:{mb:2}}),e.jsx(d,{fullWidth:!0,label:"Price",name:"price",value:l.price,onChange:i,sx:{mb:2}})]}),e.jsx(d,{fullWidth:!0,label:"Engine Size",name:"engineSize",value:l.engineSize,onChange:i,sx:{mb:2}}),e.jsx(d,{fullWidth:!0,label:"Vehicle No.",name:"vehicleNo",value:l.vehicleNo,onChange:i,sx:{mb:2}}),e.jsx(d,{fullWidth:!0,label:"Fuel",name:"fuel",value:l.fuel,onChange:i,sx:{mb:2}}),e.jsx(p,{control:e.jsx(y,{name:"isAvailable",checked:l.isAvailable,onChange:i}),label:"Is Available",sx:{mb:2}}),e.jsx(p,{control:e.jsx(y,{name:"bluetooth",checked:l.bluetooth,onChange:i}),label:"Bluetooth",sx:{mb:2}}),e.jsx(p,{control:e.jsx(y,{name:"charger",checked:l.charger,onChange:i}),label:"Charger",sx:{mb:2}}),e.jsx(p,{control:e.jsx(y,{name:"water",checked:l.water,onChange:i}),label:"Water",sx:{mb:2}}),e.jsx(p,{control:e.jsx(y,{name:"wifi",checked:l.wifi,onChange:i}),label:"Wifi",sx:{mb:2}}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",mt:2},children:[e.jsx(A,{variant:"contained",color:"secondary",onClick:m,children:"Cancel"}),e.jsx(A,{variant:"contained",color:"indigo",onClick:I,children:n?"Add Car":"Update Car"})]})]})})]})]})}const He=()=>{const v=oe(),{carRental:b,userData:m}=u.useContext(se),a=b,[w,n]=u.useState(null),[l,f]=u.useState(!1),[o,h]=u.useState({val:!1,data:null,isNew:!1}),[D,j]=u.useState(!1),S=t=>{n(t),f(!0)},i=async()=>{if(w!==null){j(!0);try{await ue("carRental",w)?(f(!1),n(null),r.success("Data deleted Successfully")):r.error("Error Deleting Car")}catch{r.error("Data cannot be deleted")}finally{j(!1)}}},M=()=>{f(!1),h({val:!1,data:null,isNew:!1}),n(null)},_=async()=>{try{h({val:!1,data:null,isNew:!1}),r.success("Data Updated Successfully")}catch{r.error("Data cannot be Updated")}},I=t=>{var x;const s=a.filter(g=>g.id==t);(x=s[0])!=null&&x.id&&h({val:!0,data:s[0],isNew:!1})},L=()=>{h({val:!0,data:m,isNew:!0})},z=[{field:"imagesList",headerName:"Avatar",width:60,sortable:!1,filterable:!1,renderCell:t=>e.jsx(fe,{src:t.row.imagesList[0]})},{field:"brand",headerName:"Brand",width:110,cellClassName:"name-column-cell"},{field:"model",headerName:"Modal",width:110},{field:"year",headerName:"Year",width:100},{field:"category",headerName:"Category",width:125},{field:"seats",headerName:"Seats",width:105},{field:"price",headerName:"Price",width:100},{field:"wifi",headerName:"WIFI",width:120,renderCell:t=>t.row.wifi?e.jsx(q,{sx:{color:"primary.darker"}}):e.jsx(H,{sx:{color:"error.main"}})},{field:"bluetooth",headerName:"Bluetooth",width:120,renderCell:t=>t.row.bluetooth?e.jsx(P,{sx:{color:"primary.darker"}}):e.jsx(U,{sx:{color:"error.main"}})},{field:"charger",headerName:"Charger",width:115,renderCell:t=>t.row.bluetooth?e.jsx(T,{sx:{color:"primary.darker"}}):e.jsx(E,{sx:{color:"error.main"}})},{field:"engineSize",headerName:"EngineSize",width:100},{field:"water",headerName:"Water",width:115,renderCell:t=>t.row.water?e.jsx(me,{sx:{color:"success.main"}}):e.jsx(E,{sx:{color:"error.main"}})},{field:"vehicleNo",headerName:"Veh#",width:100},{field:"fuel",headerName:"Fuel",width:100},{field:"isAvailable",headerName:"Availibility",width:130,renderCell:t=>t.row.isAvailable?e.jsx(he,{sx:{color:"success.main"}}):e.jsx(ce,{sx:{color:"error.main"}})},{field:"carOwnerName",headerName:"Owner",width:100,renderCell:t=>e.jsx("div",{children:t.row.carOwner.name})},{field:"carOwnerEmail",headerName:"OwnerEmail",width:150,renderCell:t=>e.jsx("div",{children:t.row.carOwner.email})},{field:"carOwnerPhone",headerName:"OwnerPH",width:140,renderCell:t=>e.jsx("div",{children:t.row.carOwner.phoneNo})},{field:"edit",headerName:"Actions",renderCell:t=>e.jsxs(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:[e.jsx(G,{onClick:()=>{I(t.row.id)},children:e.jsx(F,{})}),e.jsx(G,{onClick:()=>{S(t.row.id)},children:e.jsx(ve,{sx:{color:"error.main"}})})]})}];return e.jsxs(e.Fragment,{children:[D&&e.jsx(V,{}),e.jsxs(c,{sx:{height:"75vh",width:"100%",backgroundColor:v.palette.grey[0],borderRadius:2,border:"1px solid",borderColor:v.palette.grey.A800},children:[e.jsx(c,{display:"flex",justifyContent:"flex-end",alignItems:"center",children:e.jsx(ne,{children:e.jsx(A,{disableElevation:!0,sx:{mt:2,mr:2},size:"large",type:"submit",variant:"contained",color:"indigo",startIcon:e.jsx(F,{}),onClick:L,children:"New Car"})})}),e.jsx(xe,{columns:z,rows:a,getRowSpacing:t=>({top:t.isFirstVisible?0:5,bottom:t.isLastVisible?0:5}),getRowId:t=>t.id,slots:{toolbar:ge},sx:{"& .MuiDataGrid-root":{border:"none"},"& .MuiDataGrid-cell.MuiDataGrid-cell--textLeft":{border:"none"},"& .name-column-cell":{color:"primary.main"},"& .css-yrdy0g-MuiDataGrid-columnHeaderRow":{background:"#69c0ff !important",fontWeight:"bold",borderBottom:"none",marginBottom:1},"& .MuiDataGrid-virtualScroller.css-1793420-MuiDataGrid-virtualScroller":{},"& .MuiDataGrid-footerContainer.MuiDataGrid-withBorderColor.css-wop1k0-MuiDataGrid-footerContainer":{borderTop:"none",backgroundColor:"#69c0ff",marginTop:1},"& .MuiDataGrid-row":{backgroundColor:"secondary.lighter"},"& .MuiDataGrid-row:hover":{backgroundColor:"secondary.light"},"& .MuiDataGrid-columnHeaderTitle.css-t89xny-MuiDataGrid-columnHeaderTitle":{fontWeight:"bolder"},"& .MuiDataGrid-toolbarContainer .MuiButton-text":{color:"purple !important"}}}),e.jsx(de,{message:"Are you sure you want to Delete?",open:l,handleClose:()=>f(!1),handleAgree:i,handleDisagree:M}),o.val&&e.jsx(Oe,{message:"Are you sure you want to Update?",open:o.val,handleClose:()=>{h({val:!1,data:null,isNew:!1})},car:o.data,isNew:o.isNew,handleUpdateAgree:_})]})]})};export{He as default};
